<Window x:Class="EProtokoll.Desktop.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="eProtokoll Desktop" Height="980" Width="1350">
    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Border BorderBrush="#CFCFCF" BorderThickness="1" Padding="10" Margin="0,0,0,12">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <StackPanel Grid.Column="0">
                    <TextBlock Text="Base URL" />
                    <TextBox Text="{Binding BaseUrl, UpdateSourceTrigger=PropertyChanged}" Height="28"/>
                </StackPanel>
                <StackPanel Grid.Column="1" Margin="12,0,0,0">
                    <TextBlock Text="Username" />
                    <TextBox Text="{Binding UserName, UpdateSourceTrigger=PropertyChanged}" Height="28"/>
                </StackPanel>
                <StackPanel Grid.Column="2" Margin="12,0,0,0">
                    <TextBlock Text="Password" />
                    <PasswordBox x:Name="PasswordBox" Height="28"/>
                </StackPanel>
                <StackPanel Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Bottom" Margin="12,0,0,0">
                    <Button Content="Login" Width="90" Height="28" Click="Login_Click" />
                    <TextBlock Text=" " Width="10" />
                    <TextBlock Text="{Binding LoginStatus}" VerticalAlignment="Center" />
                </StackPanel>
            </Grid>
        </Border>

        <TabControl Grid.Row="1">
            <TabItem Header="Letters">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <Button Content="Refresh" Width="90" Click="LettersRefresh_Click" />
                        <TextBlock Text="Subject" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <TextBox Width="200" Text="{Binding LetterSubject, UpdateSourceTrigger=PropertyChanged}" />
                        <TextBlock Text="Type" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <ComboBox Width="120" ItemsSource="{Binding LetterTypes}" SelectedItem="{Binding SelectedLetterType}" />
                        <TextBlock Text="Class" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <ComboBox Width="120" ItemsSource="{Binding Classifications}" SelectedItem="{Binding SelectedClassification}" />
                        <TextBlock Text="Priority" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <ComboBox Width="120" ItemsSource="{Binding Priorities}" SelectedItem="{Binding SelectedPriority}" />
                        <TextBlock Text="Due" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <DatePicker SelectedDate="{Binding LetterDueDate}" Width="150" />
                        <Button Content="Create" Width="90" Margin="12,0,0,0" Click="LetterCreate_Click" />
                    </StackPanel>
                    <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,8">
                        <TextBlock Text="Letter Id" VerticalAlignment="Center" />
                        <TextBox Width="100" Margin="6,0,12,0" Text="{Binding LetterActionId, UpdateSourceTrigger=PropertyChanged}" />
                        <TextBlock Text="Assign User Id" VerticalAlignment="Center" />
                        <TextBox Width="100" Margin="6,0,12,0" Text="{Binding AssignUserId, UpdateSourceTrigger=PropertyChanged}" />
                        <Button Content="Assign" Width="90" Click="LetterAssign_Click" />
                        <TextBlock Text="Status" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <ComboBox Width="140" ItemsSource="{Binding Statuses}" SelectedItem="{Binding SelectedStatus}" />
                        <Button Content="Update Status" Width="120" Margin="6,0,0,0" Click="LetterStatus_Click" />
                        <TextBlock Text="Outgoing Channel" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <TextBox Width="140" Text="{Binding OutgoingChannel, UpdateSourceTrigger=PropertyChanged}" />
                        <TextBlock Text="Outgoing Date" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <DatePicker SelectedDate="{Binding OutgoingDate}" Width="140" />
                        <TextBlock Text="Outgoing Ref" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <TextBox Width="140" Text="{Binding OutgoingReference, UpdateSourceTrigger=PropertyChanged}" />
                        <Button Content="Update" Width="90" Margin="12,0,0,0" Click="LetterUpdate_Click" />
                    </StackPanel>
                    <DataGrid Grid.Row="2" ItemsSource="{Binding Letters}" AutoGenerateColumns="False" IsReadOnly="True">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Id" Binding="{Binding Id}" Width="60" />
                            <DataGridTextColumn Header="Protocol" Binding="{Binding ProtocolNumber}" Width="140" />
                            <DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="90" />
                            <DataGridTextColumn Header="Class" Binding="{Binding Classification}" Width="100" />
                            <DataGridTextColumn Header="Subject" Binding="{Binding Subject}" Width="*" />
                            <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="100" />
                            <DataGridTextColumn Header="Due" Binding="{Binding DueDate}" Width="140" />
                            <DataGridTextColumn Header="Out Channel" Binding="{Binding OutgoingChannel}" Width="120" />
                            <DataGridTextColumn Header="Out Date" Binding="{Binding OutgoingDate}" Width="140" />
                            <DataGridTextColumn Header="Out Ref" Binding="{Binding OutgoingReference}" Width="120" />
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <TabItem Header="Responses">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <TextBlock Text="Letter Id" VerticalAlignment="Center" />
                        <TextBox Width="100" Margin="6,0,12,0" Text="{Binding ResponseLetterId, UpdateSourceTrigger=PropertyChanged}" />
                        <Button Content="List" Width="90" Click="ResponsesList_Click" />
                        <TextBlock Text="Message" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <TextBox Width="300" Text="{Binding ResponseMessage, UpdateSourceTrigger=PropertyChanged}" />
                        <Button Content="Add" Width="90" Margin="12,0,0,0" Click="ResponsesAdd_Click" />
                    </StackPanel>
                    <DataGrid Grid.Row="1" ItemsSource="{Binding Responses}" AutoGenerateColumns="False" IsReadOnly="True">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Id" Binding="{Binding Id}" Width="60" />
                            <DataGridTextColumn Header="User" Binding="{Binding UserId}" Width="80" />
                            <DataGridTextColumn Header="Message" Binding="{Binding Message}" Width="*" />
                            <DataGridTextColumn Header="Created" Binding="{Binding CreatedAt}" Width="160" />
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <TabItem Header="Access">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.ColumnSpan="2" Orientation="Horizontal" Margin="0,0,0,8">
                        <TextBlock Text="Letter Id" VerticalAlignment="Center" />
                        <TextBox Width="100" Margin="6,0,12,0" Text="{Binding AccessLetterId, UpdateSourceTrigger=PropertyChanged}" />
                        <Button Content="List Users" Width="90" Click="AccessList_Click" />
                        <TextBlock Text="User Id" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <TextBox Width="100" Text="{Binding AccessUserId, UpdateSourceTrigger=PropertyChanged}" />
                        <Button Content="Add" Width="90" Margin="6,0,0,0" Click="AccessAdd_Click" />
                        <Button Content="Remove" Width="90" Margin="6,0,0,0" Click="AccessRemove_Click" />
                        <TextBlock Text="Department Id" Margin="24,0,6,0" VerticalAlignment="Center" />
                        <TextBox Width="100" Text="{Binding AccessDepartmentId, UpdateSourceTrigger=PropertyChanged}" />
                        <Button Content="Add Dept" Width="90" Margin="6,0,0,0" Click="AccessDepartmentAdd_Click" />
                        <Button Content="Remove Dept" Width="110" Margin="6,0,0,0" Click="AccessDepartmentRemove_Click" />
                    </StackPanel>
                    <DataGrid Grid.Row="1" Grid.Column="0" ItemsSource="{Binding AccessUsers}" AutoGenerateColumns="False" IsReadOnly="True">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="User Id" Binding="{Binding UserId}" Width="100" />
                        </DataGrid.Columns>
                    </DataGrid>
                    <DataGrid Grid.Row="1" Grid.Column="1" ItemsSource="{Binding AccessDepartments}" AutoGenerateColumns="False" IsReadOnly="True">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Department Id" Binding="{Binding DepartmentId}" Width="140" />
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <TabItem Header="Institutions">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <Button Content="Refresh" Width="90" Click="InstitutionsRefresh_Click" />
                        <TextBlock Text="Name" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <TextBox Width="200" Text="{Binding InstitutionName, UpdateSourceTrigger=PropertyChanged}" />
                        <TextBlock Text="External Id" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <TextBox Width="160" Text="{Binding InstitutionExternalId, UpdateSourceTrigger=PropertyChanged}" />
                        <TextBlock Text="Address" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <TextBox Width="200" Text="{Binding InstitutionAddress, UpdateSourceTrigger=PropertyChanged}" />
                        <TextBlock Text="Contact" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <TextBox Width="160" Text="{Binding InstitutionContact, UpdateSourceTrigger=PropertyChanged}" />
                        <Button Content="Create" Width="90" Margin="12,0,0,0" Click="InstitutionCreate_Click" />
                    </StackPanel>
                    <DataGrid Grid.Row="1" ItemsSource="{Binding Institutions}" AutoGenerateColumns="False" IsReadOnly="True">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Id" Binding="{Binding Id}" Width="60" />
                            <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="200" />
                            <DataGridTextColumn Header="External Id" Binding="{Binding ExternalId}" Width="120" />
                            <DataGridTextColumn Header="Address" Binding="{Binding Address}" Width="200" />
                            <DataGridTextColumn Header="Contact" Binding="{Binding Contact}" Width="160" />
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <TabItem Header="Departments">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <Button Content="Refresh" Width="90" Click="DepartmentsRefresh_Click" />
                        <TextBlock Text="Name" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <TextBox Width="200" Text="{Binding DepartmentName, UpdateSourceTrigger=PropertyChanged}" />
                        <Button Content="Create" Width="90" Margin="12,0,0,0" Click="DepartmentCreate_Click" />
                    </StackPanel>
                    <DataGrid Grid.Row="1" ItemsSource="{Binding Departments}" AutoGenerateColumns="False" IsReadOnly="True">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Id" Binding="{Binding Id}" Width="60" />
                            <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="200" />
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <TabItem Header="Users">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <Button Content="Refresh" Width="90" Click="UsersRefresh_Click" />
                        <TextBlock Text="Username" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <TextBox Width="150" Text="{Binding NewUserName, UpdateSourceTrigger=PropertyChanged}" />
                        <TextBlock Text="Full Name" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <TextBox Width="200" Text="{Binding NewUserFullName, UpdateSourceTrigger=PropertyChanged}" />
                        <TextBlock Text="Role" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <ComboBox Width="140" ItemsSource="{Binding Roles}" SelectedItem="{Binding NewUserRole}" />
                        <TextBlock Text="Department" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <ComboBox Width="160" ItemsSource="{Binding Departments}" DisplayMemberPath="Name" SelectedItem="{Binding SelectedDepartment}" />
                        <TextBlock Text="Password" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <PasswordBox x:Name="NewUserPassword" Width="140" />
                        <Button Content="Create" Width="90" Margin="12,0,0,0" Click="UserCreate_Click" />
                    </StackPanel>
                    <DataGrid Grid.Row="1" ItemsSource="{Binding Users}" AutoGenerateColumns="False" IsReadOnly="True">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Id" Binding="{Binding Id}" Width="60" />
                            <DataGridTextColumn Header="Username" Binding="{Binding UserName}" Width="160" />
                            <DataGridTextColumn Header="Full Name" Binding="{Binding FullName}" Width="200" />
                            <DataGridTextColumn Header="Role" Binding="{Binding Role}" Width="120" />
                            <DataGridTextColumn Header="Department" Binding="{Binding DepartmentId}" Width="100" />
                            <DataGridCheckBoxColumn Header="Active" Binding="{Binding IsActive}" Width="80" />
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <TabItem Header="Documents">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <TextBlock Text="Letter Id" VerticalAlignment="Center" />
                        <TextBox Width="100" Margin="6,0,12,0" Text="{Binding DocumentLetterId, UpdateSourceTrigger=PropertyChanged}" />
                        <Button Content="Upload" Width="90" Click="DocumentUpload_Click" />
                        <Button Content="Scan" Width="90" Margin="6,0,0,0" Click="DocumentScan_Click" />
                        <Button Content="List" Width="90" Margin="6,0,0,0" Click="DocumentList_Click" />
                        <TextBlock Text="Doc Id" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <TextBox Width="90" Text="{Binding DocumentId, UpdateSourceTrigger=PropertyChanged}" />
                        <Button Content="Download" Width="90" Margin="6,0,0,0" Click="DocumentDownload_Click" />
                        <Button Content="Delete" Width="90" Margin="6,0,0,0" Click="DocumentDelete_Click" />
                    </StackPanel>
                    <TextBlock Grid.Row="1" Text="Selected file path will be used for upload/scan" Foreground="#666" />
                    <DataGrid Grid.Row="2" ItemsSource="{Binding Documents}" AutoGenerateColumns="False" IsReadOnly="True">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Id" Binding="{Binding Id}" Width="60" />
                            <DataGridTextColumn Header="Name" Binding="{Binding FileName}" Width="220" />
                            <DataGridTextColumn Header="Type" Binding="{Binding ContentType}" Width="140" />
                            <DataGridTextColumn Header="Size" Binding="{Binding SizeBytes}" Width="100" />
                            <DataGridCheckBoxColumn Header="Encrypted" Binding="{Binding IsEncrypted}" Width="90" />
                            <DataGridCheckBoxColumn Header="Scanned" Binding="{Binding IsScanned}" Width="90" />
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <TabItem Header="Reports">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <Button Content="Summary" Width="90" Click="ReportSummary_Click" />
                        <Button Content="Overdue" Width="90" Margin="6,0,0,0" Click="ReportOverdue_Click" />
                        <Button Content="By User" Width="90" Margin="6,0,0,0" Click="ReportByUser_Click" />
                        <Button Content="Tracking" Width="90" Margin="6,0,0,0" Click="ReportTracking_Click" />
                        <Button Content="By Priority" Width="100" Margin="6,0,0,0" Click="ReportByPriority_Click" />
                        <Button Content="By Status" Width="100" Margin="6,0,0,0" Click="ReportByStatus_Click" />
                        <Button Content="By Dept" Width="100" Margin="6,0,0,0" Click="ReportByDepartment_Click" />
                    </StackPanel>
                    <TextBox Grid.Row="1" Text="{Binding ReportOutput}" TextWrapping="Wrap" AcceptsReturn="True" VerticalScrollBarVisibility="Auto" />
                </Grid>
            </TabItem>

            <TabItem Header="Notifications">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <Button Content="Refresh" Width="90" Click="NotificationsRefresh_Click" />
                        <TextBlock Text="Mark Read Id" Margin="12,0,6,0" VerticalAlignment="Center" />
                        <TextBox Width="100" Text="{Binding NotificationReadId, UpdateSourceTrigger=PropertyChanged}" />
                        <Button Content="Mark" Width="90" Margin="6,0,0,0" Click="NotificationMarkRead_Click" />
                    </StackPanel>
                    <DataGrid Grid.Row="1" ItemsSource="{Binding Notifications}" AutoGenerateColumns="False" IsReadOnly="True">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Id" Binding="{Binding Id}" Width="60" />
                            <DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="120" />
                            <DataGridTextColumn Header="Message" Binding="{Binding Message}" Width="*" />
                            <DataGridCheckBoxColumn Header="Read" Binding="{Binding IsRead}" Width="80" />
                            <DataGridTextColumn Header="Created" Binding="{Binding CreatedAt}" Width="160" />
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <TabItem Header="Protocol Book">
                <Grid Margin="10">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Year" VerticalAlignment="Center" />
                        <TextBox Width="100" Margin="6,0,12,0" Text="{Binding ProtocolYear, UpdateSourceTrigger=PropertyChanged}" />
                        <Button Content="Open" Width="90" Click="ProtocolOpen_Click" />
                        <Button Content="Close" Width="90" Margin="6,0,0,0" Click="ProtocolClose_Click" />
                        <Button Content="Download CSV" Width="140" Margin="6,0,0,0" Click="ProtocolDownload_Click" />
                        <Button Content="Print Layout" Width="120" Margin="6,0,0,0" Click="ProtocolPrint_Click" />
                    </StackPanel>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</Window>
